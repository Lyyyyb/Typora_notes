# ubuntu显卡驱动安装及卸载（ubuntu20.04）

## 安装

从NVIDIA官网手动下载并安装显卡驱动是一种更为高级的安装方法，适用于那些需要特定驱动版本或遇到标准Ubuntu仓库驱动不兼容的用户。以下是从NVIDIA官网手动下载并安装显卡驱动的详细步骤：

### 步骤1：下载驱动程序

1. **访问NVIDIA驱动下载页面**：
   - 打开浏览器，访问 [NVIDIA驱动下载中心](https://www.nvidia.com/Download/index.aspx)。

2. **选择你的显卡型号**：
   - 在下载页面，需要选择你的显卡类型、系列、显卡型号以及操作系统（Ubuntu通常选择Linux 64-bit）。

3. **下载驱动文件**：
   - 确认选择后，系统会提供一个或多个可下载的驱动版本。选择适合你的需求的版本，然后下载`.run`文件。这是一个自包含的安装脚本。

### 步骤2：准备安装

在进行安装之前，建议先卸载任何已安装的NVIDIA驱动，并关闭图形界面，以避免安装过程中的冲突。

1. **卸载旧的NVIDIA驱动**：
   ```bash
   sudo apt remove --purge '^nvidia-.*'
   ```

2. **关闭图形界面**：
   - 为了安装下载的驱动，需要退出图形界面。可以通过以下命令切换到命令行模式：
     ```bash
     sudo systemctl isolate multi-user.target
     ```

### 步骤3：安装驱动程序

1. **转到下载的驱动文件所在目录**：
   ```bash
   cd ~/Downloads
   ```

2. **使驱动安装文件可执行**：
   ```bash
   chmod +x NVIDIA-Linux-x86_64-xxx.xx.run
   ```

3. **运行安装脚本**：
   - 执行以下命令开始安装：
     ```bash
     sudo ./NVIDIA-Linux-x86_64-xxx.xx.run
     ```
   - 跟随屏幕上的指导完成安装。安装过程中可能会询问你是否要自动配置X配置文件，通常选择“是”会比较方便。

### 步骤4：重新启动图形界面

安装完成后，可以重新启动图形界面：

```bash
sudo systemctl start graphical.target
```

或者直接重启电脑：

```bash
sudo reboot
```

安装完成后，你的系统应该已经使用了最新安装的NVIDIA驱动。这种手动安装方式可以让你完全控制使用哪个版本的驱动，但同时也需要更多的手动设置和调整。如果在安装过程中遇到问题，可以查看安装日志，通常位于`/var/log`目录下，或者在NVIDIA的官方论坛和社区寻求帮助。

## 卸载

卸载从NVIDIA官网下载并安装的显卡驱动需要使用与安装相似的步骤，通常是通过命令行完成。如果你之前是通过`.run`文件安装的驱动，那么卸载过程也会用到这个文件。以下是具体的步骤：

### 步骤1：准备

1. **找到你之前安装显卡驱动的`.run`文件**：
   - 如果你还保留了之前下载的`.run`安装文件，这会非常方便。如果你没有保留这个文件，你需要重新下载与你当前安装相同版本的驱动程序。

2. **转到文件所在目录**：
   - 使用终端，使用`cd`命令转到包含`.run`文件的目录，通常是`Downloads`文件夹：
     ```bash
     cd ~/Downloads
     ```

### 步骤2：卸载驱动

1. **使`.run`文件可执行（如果尚未设置）**：
   ```bash
   chmod +x NVIDIA-Linux-x86_64-xxx.xx.run
   ```

2. **关闭图形界面**：
   - 为了安全地卸载NVIDIA驱动，最好在没有图形界面的情况下操作。你可以通过以下命令来关闭图形界面并进入命令行模式：
     ```bash
     sudo systemctl isolate multi-user.target
     ```

3. **运行卸载命令**：
   - 使用之前的`.run`安装文件来卸载驱动：
     ```bash
     sudo ./NVIDIA-Linux-x86_64-xxx.xx.run --uninstall
     ```

### 步骤3：重启电脑

- 卸载完成后，重启你的电脑：
  ```bash
  sudo reboot
  ```

### 步骤4：确认卸载

- 重启后，你可以检查驱动是否已经被正确卸载：
  ```bash
  lspci -nnk | grep -i nvidia
  ```
- 这个命令将显示任何NVIDIA相关的设备及其驱动情况。如果驱动已经被卸载，你不应该看到列出的驱动详情。

通过这些步骤，你可以安全地卸载通过NVIDIA官网下载的`.run`文件安装的驱动程序。如果在过程中遇到任何问题，可以查看NVIDIA的官方文档或寻求社区的帮助。